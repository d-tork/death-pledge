var checkCall=false;var DisplayCoreClass=function(){var self=this;var m_OpenWindow_Wins={};var m_bIsPublicPage=false;var m_nLanguID;var m_CheckSetMap={};var m_Targets={};var m_strSecureContactID;var m_dStyleSheets={};this.setPublic=function(bIsPublicPage,languID){m_bIsPublicPage=bIsPublicPage;m_nLanguID=languID};this.setPortal=function(strSecureContactID,languID){m_bIsPublicPage=true;m_strSecureContactID=strSecureContactID;m_nLanguID=languID};this.getPortalContact=function(){return m_strSecureContactID};var openPopup=function(strURL,strTarget,strFeatures){var w=m_OpenWindow_Wins[strTarget];if(w&&!w.closed){w.close();m_OpenWindow_Wins[strTarget]=null}w=window.open(strURL,strTarget,strFeatures);w.focus();m_OpenWindow_Wins[strTarget]=w};this.openPopup=openPopup;this.mapPopup=function(nRecordID,nTableID,nLanguID){var strMapPage="/Matrix/Public/InteractiveMapPopup.aspx";var strFeatures="height=600,width=950,left=50,top=17,resizable=Yes,status=Yes,scrollbars=No,menubar=Yes,titlebar=Yes,toolbar=yes,location=Yes";var strPublic=m_bIsPublicPage?'&pbs=1':'';openPopup(strMapPage+"?RecordID="+nRecordID+"&TableID="+nTableID+"&L="+nLanguID+strPublic,'MapPointWin',strFeatures)};this.ITQPopup=function(strITQID,nDisplayID,strParams,strExpireKey,nWidth,nHeight){var strFeatures="height="+nHeight+",width="+nWidth+",left=25,top=25,resizable=Yes,status=Yes,scrollbars=Yes,menubar=Yes,titlebar=Yes,toolbar=yes,location=yes";if(m_bIsPublicPage)strParams+="&pbs=1&L="+m_nLanguID;openPopup("/Matrix/Public/DisplayITQPopup.aspx?iid="+strITQID+"&did="+nDisplayID+"&params="+strParams+"&exk="+strExpireKey,"ITQ",strFeatures)};this.photoPopup=function(oParams){var aParams=[];for(var strName in oParams)aParams.push(strName+"="+oParams[strName]);var strFeatures="height=300,width=400,left=25,top=25,resizable=yes,status=yes,scrollbars=yes,menubar=yes,titlebar=yes,toolbar=yes,location=yes";var strURL="/Matrix/Public/PhotoPopup.aspx?"+aParams.join("&");openPopup(strURL,'ITQ',strFeatures)};this.photoDisplay=function(strPicPath){var strFeatures="height=410,width=410,left=25,top=25";openPopup("/Matrix/PhotoDisplay.aspx?PICPATH="+strPicPath,"PhotoWin",strFeatures)};this.watchItem=function(strID,nTableID){var strFeatures="height=380,width=630,left=250,top=200";openPopup("/Matrix/AddWatchedItem.aspx?ListingID="+strID+"&TableID="+nTableID,"WatchItemWin",strFeatures)};this.registerCheckSet=function(strPrefix,objChecks){m_CheckSetMap[strPrefix]=objChecks};var findCheckSet=function(strName){for(var strPrefix in m_CheckSetMap)if(strName.indexOf(strPrefix)==0)return m_CheckSetMap[strPrefix];return null};this.onCheck=function(cb,ev){var chks=findCheckSet(cb.name);if(chks)chks.onCheck(cb,ev)};this.divClick=function(div,ev){var tgt=ev.target||ev.srcElement;for(;tgt&&tgt!=div;tgt=tgt.parentNode)if(tgt.href||tgt.nodeName=='INPUT'||tgt.nodeName=='TEXTAREA'||tgt.nodeName=='SELECT')return;var aInputs=div.getElementsByTagName('INPUT');for(var i=0;i<aInputs.length;++i){var cb=aInputs[i];if(cb.type=='checkbox'&&findCheckSet(cb.name)!=null){cb.click();if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;return}}};this.updateStarRating=function(imgClickedStar,nClickedStarsRating){var starResponseHandler=function(){};if(m_strSecureContactID){var spnContainer=imgClickedStar.parentNode;var nCurrentRating=spnContainer.getAttribute("CurrentRating");var nNewStarRating=nCurrentRating==nClickedStarsRating?nClickedStarsRating-1:nClickedStarsRating;spnContainer.setAttribute("CurrentRating",nNewStarRating);var strItemKey=spnContainer.getAttribute("ItemKey");var strQuery="?UT=StarRating&CID="+m_strSecureContactID+"&SR="+nNewStarRating+"&IK="+strItemKey+"&"+(new Date).getMilliseconds();var xhrXMLRequest=newXMLHttpRequest();xhrXMLRequest.onreadystatechange=getReadyStateHandlerText(xhrXMLRequest,starResponseHandler);xhrXMLRequest.open("GET","/Matrix/Async/PortalListingUpdate.async"+strQuery,true);xhrXMLRequest.send("");for(var nImgIndex=0;nImgIndex<spnContainer.childNodes.length;nImgIndex++){var imgStar=spnContainer.childNodes[nImgIndex];var nStarNumber=imgStar.getAttribute("num");if(nStarNumber!=null)if(nNewStarRating>nStarNumber)imgStar.src="/Matrix/Images/starOn.gif";else imgStar.src="/Matrix/Images/starOff.gif"}}};this.clickPortalBucket=function(span,strBucket,ev){if(PortalResultsJs){if(ev.stopPropagation)ev.stopPropagation();else ev.cancelBubble=true;PortalResultsJs.toggleBucket($(span).parent(),strBucket,m_strSecureContactID)}};var bindTarget=function(strTarget){var oTarget=m_Targets[strTarget];if(!oTarget)m_Targets[strTarget]=oTarget={};return oTarget};this.sort=function(strTarget,strSortFields){var target=bindTarget(strTarget);var strError=target.whyCantSort&&target.whyCantSort();if(strError)alert(strError);else __doPostBack(strTarget,'Sort|'+strSortFields)};this.setWhyCantSort=function(strTarget,fWhyCantSort){bindTarget(strTarget).whyCantSort=fWhyCantSort};this.redirectThroughPopupCheck=function(nButtonID){window.open("/Matrix/PopupCheckCollector.aspx?DIYBID="+nButtonID+document.forms[0].action.replace(/^[^?]*\?/,"&"))};this.addStyleSheet=function(strStyleSheet){if(!m_dStyleSheets[strStyleSheet]){var head=document.getElementsByTagName('head')[0];var $cssNode=$('<link rel="stylesheet" type="text/css" href="'+strStyleSheet+'" displaystylesheet="true">');var cssNode=$cssNode[0];var triggerLoad=function(){$cssNode.trigger('css_loaded');$cssNode.prop('loaded','true')};if(/Firefox|MSIE/.test(navigator.userAgent)){cssNode.onload=triggerLoad;head.appendChild(cssNode)}else{var imgNode=document.createElement('img');imgNode.src=strStyleSheet;imgNode.onerror=function(){this.onerror=null;document.body.removeChild(this);triggerLoad();setTimeout(triggerLoad,500)};head.appendChild(cssNode);document.body.appendChild(imgNode)}m_dStyleSheets[strStyleSheet]=true}};this.removeMinorStyleSheets=function(nTemplateID){for(var strStyleSheet in m_dStyleSheets)if(m_dStyleSheets.hasOwnProperty(strStyleSheet)&&strStyleSheet.indexOf('t='+nTemplateID+'&m')>-1)$('link[href="'+strStyleSheet+'"]').remove()}};var Dpy=new DisplayCoreClass;var DisplayRolloutClass=function(){var SetTriggerHTML=function(strInjectionSiteID,strAttributeNameOfHTMLToShow){$("."+strInjectionSiteID).each(function(){this.innerHTML=this.attributes[strAttributeNameOfHTMLToShow].value})};var ToggleInjectedSubdisplay=function(divInjectionSite,bShow){if(bShow){$(divInjectionSite).slideDown('fast',function(){$('.keptInViewport').trigger('docHeightChange')});SetTriggerHTML(divInjectionSite.id,"RollupHTML")}else{$(divInjectionSite).slideUp('fast',function(){$('.keptInViewport').trigger('docHeightChange')});SetTriggerHTML(divInjectionSite.id,"RolloutHTML")}var nQueryNumber=divInjectionSite.attributes.QueryNumber.value;if(nQueryNumber!='-1'){var strItemKey=divInjectionSite.attributes.ItemKey.value;var nDisplayID=divInjectionSite.attributes.DisplayID.value;var strRolloutKey=divInjectionSite.attributes.RolloutKey.value;var strMessage=(bShow?'show':'hide')+' '+nQueryNumber+" "+strItemKey+" "+nDisplayID+" "+strRolloutKey;var strVal=$.getCookie("Notify",(new Date).getTime())+"|5 "+strMessage;document.cookie="Notify="+escape(strVal)+"; path=/;"}};var InjectHTML=function(divInjectionSite,strHTML){divInjectionSite.innerHTML=strHTML;ToggleInjectedSubdisplay(divInjectionSite,true)};var RolloutToggle=function(strInjectionSiteID){var divInjectionSite=document.getElementById(strInjectionSiteID);var bIsCurrentlyHidden=!$(divInjectionSite).is(":visible");if(bIsCurrentlyHidden)if(divInjectionSite.innerHTML==""){var strRequest=divInjectionSite.attributes.ITQParams.value;var cid=Dpy.getPortalContact();$.get("/Matrix/Public/GetDisplay/ByITQ.ashx?"+strRequest+"&cid="+cid,null,function(strHTML){InjectHTML(divInjectionSite,strHTML)});SetTriggerHTML(strInjectionSiteID,"SpinnerHTML")}else ToggleInjectedSubdisplay(divInjectionSite,true);else ToggleInjectedSubdisplay(divInjectionSite,false)};var fDebounce=function(func,nThreasHoldMilliseconds,bExecSynchronously){return function(){var timeout;var obj=this,args=arguments,retval=false;function delayed(){if(!bExecSynchronously)func.apply(obj,args);timeout=null}if(timeout)clearTimeout(timeout);else if(bExecSynchronously)retval=func.apply(obj,args);timeout=setTimeout(delayed,nThreasHoldMilliseconds||100);return retval}};this.rolloutTriggerClick=fDebounce(RolloutToggle,300,true)};var DpyRollout=new DisplayRolloutClass;var DisplayCheckBoxSetClass=function(oOptions){var self=this;var m_strCBPrefix=oOptions.CBPrefix;var m_strHFPrefix=oOptions.HFPrefix;var m_bHasHiddenFields=oOptions.hasOwnProperty('HFPrefix');var m_bSingleSelect=oOptions.SingleSelect;var m_strLastChecked=null;var m_nSetSize=0;var m_nNumChecked=0;var m_nExtraSize=0;var m_nExtraChecked=0;var m_bLoaded=false;var m_Highlighted=null;var m_dPendingChanges={};var m_bRunCheckAllOnPageLoadWith=null;var m_aListeners=[];Dpy.registerCheckSet(m_strCBPrefix,this);this.initialise=function(nSetSize,nChecked,nRowsThisPage,nCheckedThisPage){m_nSetSize=nSetSize;m_nNumChecked=nChecked;m_nExtraSize=nRowsThisPage<0?0:nSetSize-nRowsThisPage;m_nExtraChecked=nCheckedThisPage<0?0:nChecked-nCheckedThisPage;return this};this.initByKeys=function(aKeys){m_nSetSize=aKeys.length};this.addListener=function(fHandler){m_aListeners.push(fHandler);return this};this.bindToButtons=function(buttonBar){var nPrevChecked=m_nNumChecked;self.addListener(function(cs){var nCurr=cs.checkedCount();buttonBar.update(nCurr-nPrevChecked);nPrevChecked=nCurr})};var refreshPageChecked=function(){var bIsPageChecked=m_nSetSize-m_nExtraSize==m_nNumChecked-m_nExtraChecked;var aCheckboxes=document.getElementsByName(m_strCBPrefix);for(var i=0;i<aCheckboxes.length;++i)aCheckboxes[i].checked=bIsPageChecked};var refresh=function(){for(var nIndex in m_aListeners)m_aListeners[nIndex](self);refreshPageChecked()};var findWrapper=function(oCheckBox){var e=oCheckBox;do e=e.parentNode;while(e&&e.id!='wrapperTable');return e};var rowToggle=function(strCheckboxName,bChecked){var aCheckBoxes=document.getElementsByName(strCheckboxName);var cbNonVolatile=null;for(var nIndex=0;nIndex<aCheckBoxes.length;nIndex++){var cb=aCheckBoxes[nIndex];cb.checked=bChecked;if(!cbNonVolatile&&!cb.attributes.isVolatile)cbNonVolatile=cb}if(cbNonVolatile){var e=findWrapper(cbNonVolatile);if(e)if(bChecked){if(e.getAttribute("J_OriginalClass")==null)e.setAttribute("J_OriginalClass",e.className);e.className=e.className.replace(/Display(|Alt|Reg)Row/,"")+" "+"DisplaySelectedRow"}else{var strOriginalClass=e.getAttribute("J_OriginalClass");if(strOriginalClass!=null)e.className=strOriginalClass}}return cbNonVolatile!=null};var isItemInField=function(strHFSuffix,strKey){var oCurrent=document.getElementById(m_strHFPrefix+strHFSuffix);var strCurrent=oCurrent.value;return(','+strCurrent+',').indexOf(','+strKey+',')>=0};var addCheckBoxToHiddenField=function(strHFIDSuffix,strCheckboxName){var strKey=strCheckboxName.substr(m_strCBPrefix.length);if(!isItemInField(strHFIDSuffix,strKey)){var oCurrent=document.getElementById(m_strHFPrefix+strHFIDSuffix);oCurrent.value+=(oCurrent.value==''?'':',')+strKey}};var removeCheckBoxFromHiddenField=function(strHFIDSuffix,strCheckboxName){var strKey=strCheckboxName.substr(m_strCBPrefix.length);if(isItemInField(strHFIDSuffix,strKey)){var oCurrent=document.getElementById(m_strHFPrefix+strHFIDSuffix);var aValues=oCurrent.value.split(',');for(var i=0;i<aValues.length;++i)if(aValues[i]==strKey){aValues.splice(i,1);oCurrent.value=aValues.join(',');break}}};var volatileToggle=function(strCheckboxName,bChecked){if(m_bHasHiddenFields)if(bChecked)addCheckBoxToHiddenField('hfCheckedListingsNotOnDisplay',strCheckboxName);else removeCheckBoxFromHiddenField('hfCheckedListingsNotOnDisplay',strCheckboxName)};var addCheckBoxToRegisteredString=function(strCheckboxID,bChecked){var strKey=strCheckboxID.substr(m_strCBPrefix.length);if(m_bHasHiddenFields&&!m_dPendingChanges.hasOwnProperty(strKey)){var oCurrent=document.getElementById(m_strHFPrefix+'hfChangedCheckboxes');oCurrent.value+=(oCurrent.value==''?'':',')+strKey}m_dPendingChanges[strKey]=bChecked;m_nNumChecked+=bChecked?1:-1};var getAllCheckBoxes=function(bAll){var aInputs=document.forms[0].getElementsByTagName("INPUT");var aCheckboxes=[];for(var i=0;i<aInputs.length;++i){var cb=aInputs[i];if(cb.type=='checkbox'&&cb.name.indexOf(m_strCBPrefix)==0&&cb.name!=m_strCBPrefix&&(!cb.attributes.isVolatile||bAll))aCheckboxes.push(cb)}return aCheckboxes};var shiftClickBoxes=function(strPrevious,strCurrent){var aInputs=document.forms[0].getElementsByTagName("INPUT");var aCheckboxes=[];var strMarked=null;for(var i=0;i<aInputs.length;++i){var cb=aInputs[i];if(cb.type=='checkbox'&&cb.name.indexOf(m_strCBPrefix)==0&&cb.name!=m_strCBPrefix){if(cb.name==strPrevious||cb.name==strCurrent)if(strMarked){if(strMarked!=cb.name){aCheckboxes.push(cb);return aCheckboxes}}else strMarked=cb.name;if(strMarked)aCheckboxes.push(cb)}}return[]};var bulkCheck=function(aCheckboxes,bIsChecked){for(var i=0;i<aCheckboxes.length;++i){var cb=aCheckboxes[i];if(cb.checked!=bIsChecked){cb.checked=bIsChecked;rowToggle(cb.name,bIsChecked);addCheckBoxToRegisteredString(cb.name,bIsChecked)}}};this.setSize=function(){return m_nSetSize};this.checkedCount=function(){return m_nNumChecked};this.isChangedItemChecked=function(strKey,bDefault){var bChange=m_dPendingChanges[strKey];return bChange===undefined?bDefault:bChange};this.isPageChecked=function(){return m_nSetSize-m_nExtraSize==m_nNumChecked-m_nExtraChecked};this.highlightRow=function(strKey){if(m_Highlighted){m_Highlighted.className=m_Highlighted.className.replace(' DisplayHighlightedRow','');m_Highlighted=null}if(strKey){var aCheckboxes=document.getElementsByName(m_strCBPrefix+strKey);if(aCheckboxes.length>0&&strKey){var e=findWrapper(aCheckboxes[0]);if(e){if(e.getAttribute("J_OriginalClass")==null)e.setAttribute("J_OriginalClass",e.className);e.className=e.className+" DisplayHighlightedRow";m_Highlighted=e;var parent=e;do parent=parent.parentNode;while(parent&&parent.scrollHeight<=parent.clientHeight);if(parent){var p=e.offsetTop+e.offsetHeight-parent.clientHeight;if(parent.scrollTop>e.offsetTop)parent.scrollTop=e.offsetTop;else if(parent.scrollTop<p)parent.scrollTop=p}}}}};this.checkItems=function(straItemNames,bChecked){for(var i=0;i<straItemNames.length;i++){var strItemName=m_strCBPrefix+straItemNames[i];rowToggle(strItemName,bChecked)||volatileToggle(strItemName,bChecked);addCheckBoxToRegisteredString(strItemName,bChecked)}refresh()};this.refreshRow=function(divRow,nRowIndex,bHighlighted){var aInputs=divRow.getElementsByTagName("INPUT");for(var i=0;i<aInputs.length;++i){var cb=aInputs[i];if(cb.type=='checkbox'&&cb.name.indexOf(m_strCBPrefix)==0&&cb.name!=m_strCBPrefix&&!cb.attributes.isVolatile){cb.checked=self.isChangedItemChecked(cb.name.substr(m_strCBPrefix.length),false);var e=findWrapper(cb);var strClassName=(e.getAttribute("J_OriginalClass")||e.className).replace(/Display(Alt|Reg)Row/,nRowIndex&1?'DisplayAltRow':'DisplayRegRow');e.className=(cb.checked?strClassName.replace(/Display(|Alt|Reg)Row/,"")+" DisplaySelectedRow":strClassName)+(bHighlighted?' DisplayHighlightedRow':'');if(e.ClassName!=strClassName)e.setAttribute("J_OriginalClass",strClassName);else e.removeAttribute("J_OriginalClass")}}};this.onCheck=function(cb,ev){if(self.isChangedItemChecked(cb.name.substr(m_strCBPrefix.length),!cb.checked)==cb.checked)return;if(cb.name==m_strCBPrefix){if(m_bLoaded&&!m_bSingleSelect){bulkCheck(getAllCheckBoxes(),cb.checked);refresh()}}else if(m_bSingleSelect){if(cb.checked){if(m_strLastChecked&&m_strLastChecked!=cb.name)bulkCheck(document.getElementsByName(m_strLastChecked),false);if(m_bHasHiddenFields){document.getElementById(m_strHFPrefix+'hfCheckAllChangedTo').value=false;document.getElementById(m_strHFPrefix+'hfChangedCheckboxes').value=''}m_nNumChecked=0;m_nExtraChecked=0;m_strLastChecked=cb.name}else if(cb.name==m_strLastChecked)m_strLastChecked='NONE';rowToggle(cb.name,cb.checked)||volatileToggle(cb.name,cb.checked);addCheckBoxToRegisteredString(cb.name,cb.checked);refresh()}else{rowToggle(cb.name,cb.checked)||volatileToggle(cb.name,cb.checked);addCheckBoxToRegisteredString(cb.name,cb.checked);if(ev&&ev.shiftKey&&m_strLastChecked&&m_strLastChecked!=cb.name&&!cb.attributes.isVolatile)bulkCheck(shiftClickBoxes(m_strLastChecked,cb.name),cb.checked);m_strLastChecked=cb.name;refresh()}};this.onPageCheck=function(bIsChecked){if(m_bLoaded&&!m_bSingleSelect){bulkCheck(getAllCheckBoxes(),bIsChecked);refresh()}else m_bRunCheckAllOnPageLoadWith=bIsChecked};this.onAllSetCheck=function(bForceChecked){if(m_bLoaded&&!m_bSingleSelect){var bIsChecked=bForceChecked===null?m_nNumChecked!=m_nSetSize:bForceChecked;if(m_bHasHiddenFields){var hfCheckAllChangedTo=document.getElementById(m_strHFPrefix+'hfCheckAllChangedTo');hfCheckAllChangedTo.value=bIsChecked;document.getElementById(m_strHFPrefix+'hfChangedCheckboxes').value='';document.getElementById(m_strHFPrefix+'hfCheckedListingsNotOnDisplay').value=''}m_dPendingChanges={};var aCheckboxes=getAllCheckBoxes(true);for(var i=0;i<aCheckboxes.length;++i){var cb=aCheckboxes[i];cb.checked=bIsChecked;rowToggle(cb.name,bIsChecked)}m_nNumChecked=bIsChecked?m_nSetSize:0;m_nExtraChecked=bIsChecked?m_nExtraSize:0;refresh()}};this.resetExtraNumbers=function(){var nRowsThisPage=0;var nCheckedThisPage=0;var aCheckboxes=getAllCheckBoxes();var dChecked={};for(var i=0;i<aCheckboxes.length;i++){var cb=aCheckboxes[i];if(!m_bHasHiddenFields&&self.isChangedItemChecked(cb.name.substr(m_strCBPrefix.length),false)){cb.checked=true;rowToggle(cb.name,true)}dChecked[cb.name]=cb.checked}for(var name in dChecked)if(dChecked.hasOwnProperty(name)){nRowsThisPage+=1;nCheckedThisPage+=dChecked[name]?1:0}m_nExtraSize=m_nSetSize-nRowsThisPage;m_nExtraChecked=m_nNumChecked-nCheckedThisPage};this.resetPending=function(){m_dPendingChanges={};document.getElementById(m_strHFPrefix+'hfCheckAllChangedTo').value='';document.getElementById(m_strHFPrefix+'hfChangedCheckboxes').value='';document.getElementById(m_strHFPrefix+'hfCheckedListingsNotOnDisplay').value=''};var displaysLoaded=function(){var aCheckboxes=getAllCheckBoxes();for(var i=0;i<aCheckboxes.length;++i){var cb=aCheckboxes[i];if(cb.checked)if(m_bSingleSelect){if(!m_strLastChecked)m_strLastChecked=cb.name;if(m_strLastChecked!=cb.name)cb.checked=false;else rowToggle(cb.name,true)}else rowToggle(cb.name,true)}m_bLoaded=true;refresh()};if($.isReady)setTimeout(displaysLoaded,0);else $(displaysLoaded)};function DisplayHelperClass(){this.showSelectedCount=function(strCheckCountID){return function(cs){if(window.MLClientLabel)MLClientLabel.update(strCheckCountID,{checkeditems:cs.checkedCount()})}};this.updateCheckAll=function(strCheckBoxID){return function(cs){var cb=document.getElementById(strCheckBoxID);if(cb)cb.checked=cs.isPageChecked()}};this.updateCheckAllNoneLink=function(lnkCheckAllID,nSetSize){return function(cs){var lnk=document.getElementById(lnkCheckAllID);if(lnk)if(cs.checkedCount()==nSetSize)lnk.setAttribute('disabled','disabled');else if(lnk.hasAttribute('disabled'))lnk.removeAttribute('disabled')}};this.multiSortWindow=function(strArgs){var strFeatures="height=460,width=780,left=25,top=25";Dpy.openPopup("/Matrix/MultiSortPopup.aspx?"+(strArgs||'')+document.forms[0].action.replace(/^[^?]*\?/,"&"),"MultiSortWin",strFeatures)}}var DpyHelp=new DisplayHelperClass;function CartClass(m_strClientID,m_strCartDropdownID,m_nCartMax,m_nInitCartCount,m_strDisplayedCart,m_bShowingHold,nHoldSize,m_aCartSizes,m_aCartNames,ML){var m_nCurCartCount=m_nInitCartCount;var m_nHoldSize=nHoldSize;this.CartMaxAdd=function(){return m_nCartMax-m_nCurCartCount};this.WhyCartAddDisabled=function(nCurr){var ddlCartSelector=document.getElementById(m_strCartDropdownID);var nMaxAdd=m_nCartMax-m_nCurCartCount;return ddlCartSelector&&m_strDisplayedCart==ddlCartSelector.value?ML.AlreadyViewingThisCart():nCurr<1?ML.CheckAtLeast1():nCurr>nMaxAdd?ML.TooManyCheckedCart({maxitemschecked:m_nCartMax,availablecartsize:nMaxAdd}):null};this.WhyCartViewDisabled=function(nCurr){return!m_bShowingHold&&m_strDisplayedCart==document.getElementById(m_strCartDropdownID).value?ML.AlreadyViewingThisCart():null};this.UpdateHolds=function(strShowHoldsID,nHoldSize,mlstrHoldsCount){m_nHoldSize=nHoldSize;var HoldsButton=document.getElementById(strShowHoldsID);if(HoldsButton){HoldsButton.style.display=nHoldSize>0?"":"none";$(HoldsButton).find('span').text(mlstrHoldsCount)}};this.ChangeSelectedCart=function(ddlCartSelector,strPrefix,strShowAllID,fExpand){var strSelectedCart=ddlCartSelector.value;if(strSelectedCart==strShowAllID){fExpand();return true}m_nCurCartCount=m_aCartSizes[strSelectedCart]||0;var setDisplay=function(elementID,strDisplayValue){var target=document.getElementById(strPrefix+elementID);if(target)target.style.display=strDisplayValue};window.displayButtons.update(0);if(strSelectedCart==m_strDisplayedCart){var bIsContactCart=strSelectedCart!=null&&strSelectedCart.length>1&&strSelectedCart.substring(0,1)=="C";if(m_bShowingHold){window.displayButtons.enable(strPrefix+"m_lbView");setDisplay("m_tdRemoveFrom","");setDisplay("m_tdShowHolds","none");setDisplay("m_tdMoveToHolds",bIsContactCart?"":"none");setDisplay("m_tdAddTo","none");setDisplay("m_tdMoveToCart","")}else{window.displayButtons.disable(strPrefix+"m_lbView",ML.AlreadyViewingThisCart);setDisplay("m_tdRemoveFrom","");setDisplay("m_tdShowHolds",bIsContactCart&&m_nHoldSize>0?"":"none");setDisplay("m_tdMoveToHolds",bIsContactCart?"":"none");setDisplay("m_tdAddTo","none");setDisplay("m_tdMoveToCart","none")}}else{window.displayButtons.enable(strPrefix+"m_lbView");setDisplay("m_tdRemoveFrom","none");setDisplay("m_tdShowHolds","none");setDisplay("m_tdMoveToHolds","none");setDisplay("m_tdAddTo","");setDisplay("m_tdMoveToCart","none")}return false};this.UpdateCartCount=function(val){var ddlCartSelector=document.getElementById(m_strCartDropdownID);if(ddlCartSelector!=null)m_aCartSizes[ddlCartSelector.value]=val;m_nCurCartCount=val;window.displayButtons.update(val)}}DisplayPagingClass=function(strPrevID,strNextID,bBind){var self=this;var doLink=function(strLinkID){var link=document.getElementById(strLinkID);if(link)window.location=link.attributes.href.value};this.processKeyupEvent=function(event){if($(event.target).is('input:not([type="checkbox"],[type="radio"]), select, textarea')||event.type!='keyup')return;if(event.which==37)doLink(strPrevID);if(event.which==39)doLink(strNextID)};if(bBind)$(document).keyup(self.processKeyupEvent)};